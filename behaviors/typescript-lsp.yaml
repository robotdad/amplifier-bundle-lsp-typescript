# TypeScript/JavaScript LSP Behavior
# Configures typescript-language-server for both TypeScript and JavaScript.
# This config deep merges with lsp-core's tool-lsp config.

bundle:
  name: behavior-typescript-lsp
  version: 0.1.0

# Include lsp-core behavior to get the tool-lsp module with source
includes:
  - bundle: git+https://github.com/microsoft/amplifier-bundle-lsp@main#subdirectory=behaviors/lsp-core.yaml

# Tool configuration - deep merges with core bundle's tool-lsp
tools:
  - module: tool-lsp
    config:
      languages:
        typescript:
          extensions:
            - .ts
            - .tsx
            - .mts
            - .cts
          workspace_markers:
            - tsconfig.json
            - package.json
            - .git
          server:
            command:
              - typescript-language-server
              - --stdio
            install_check:
              - typescript-language-server
              - --version
            install_hint: "Install with: npm install -g typescript-language-server typescript"
          initialization_options:
            preferences:
              includeInlayParameterNameHints: all
              includeInlayFunctionParameterTypeHints: true
              includeInlayEnumMemberValueHints: true
              includeInlayFunctionLikeReturnTypeHints: true
              includeInlayVariableTypeHints: true
        
        javascript:
          extensions:
            - .js
            - .jsx
            - .mjs
            - .cjs
          workspace_markers:
            - jsconfig.json
            - package.json
            - .git
          server:
            command:
              - typescript-language-server
              - --stdio
            install_check:
              - typescript-language-server
              - --version
            install_hint: "Install with: npm install -g typescript-language-server typescript"
          initialization_options:
            preferences:
              includeInlayParameterNameHints: all
              includeInlayFunctionParameterTypeHints: true

# TypeScript/JavaScript-specific context for agents
context:
  include:
    - lsp-typescript:context/typescript-lsp.md

# TypeScript/JavaScript code intelligence agent
agents:
  include:
    - lsp-typescript:typescript-code-intel
